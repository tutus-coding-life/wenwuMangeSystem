{% extends "base.html" %}
{% block title %}类别管理{% endblock %}
{% block content %}
<h2>类别管理</h2>

{% if current_user.role == 'admin' %}
    <a href="{{ url_for(add_route) }}" class="btn btn-success mb-3">添加{{ type }}</a>
{% endif %}

<table class="table table-striped table-hover">
    <thead class="table-primary">
        <tr>
            <th>ID</th>
            <th>名称</th>
            {% if current_user.role == 'admin' %}
                <th>操作</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
        {% for item in items %}
        <tr>
            <td>{{ item.id }}</td>
            <td>{{ item.name }}</td>
            {% if current_user.role == 'admin' %}
            <td>
                <a href="{{ url_for(edit_route, id=item.id) }}" class="btn btn-sm btn-warning">修改</a>
                <form action="{{ url_for(delete_route, id=item.id) }}" method="post" style="display:inline;">
                    <button type="submit" class="btn btn-sm btn-danger" 
                            onclick="return confirm('确定删除该类别？删除后关联的文物将失去类别信息！');">
                        删除
                    </button>
                </form>
            </td>
            {% endif %}
        </tr>
        {% endfor %}
    </tbody>
</table>

{% if items|length == 0 %}
    <div class="alert alert-info text-center">
        暂无类别记录，可由管理员添加或通过导入CSV自动生成。
    </div>
{% endif %}
{% endblock %}